{% extends "auth/base.html" %}

{% from "security/_macros.html" import render_field_with_errors, render_field, render_field_errors, render_form_errors, prop_next %}



{% block content %}
  {% include "security/_messages.html" %}
  
  <title>Sign In</title>
    <style>
        body {
            background-color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            text-align: center;
        }
        .button-group {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .button {
            background-color: white; 
            color: #333;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
        }
        .button.active {
            background-color: grey;
            color: white;
        }
        .form {
            display: flex;
            flex-direction: column; 
            align-items: center; 
        }
        .input-field {
            margin: 10px 0;
            padding: 10px;
            width: 80%; 
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .login-link {
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sign In</h1>
        <p>sign in using your institution credentials</p>
       
        <form action="{{ url_for_security('login') }}{{ prop_next() }}" method="post" name="login_user_form">
          {{ login_user_form.hidden_tag() }}
          {{ render_form_errors(login_user_form) }}
          {% if "email" in identity_attributes %}{{ render_field_with_errors(login_user_form.email, class="input-field", placeholder="Email") }}{% endif %}
          {% if login_user_form.username and "username" in identity_attributes %}
            {% if "email" in identity_attributes %}{% endif %}
            {{ render_field_with_errors(login_user_form.username, class="input-field") }}
          {% endif %}
          <div class="fs-gap">{{ render_field_with_errors(login_user_form.password, class="input-field", placeholder="Password") }}</div>
`          {{login_user_form.remember.label}}
          {{ render_field_with_errors(login_user_form.remember) }}
          {{ render_field_errors(login_user_form.csrf_token) }}
          {{ render_field(login_user_form.submit, class="btn btn-dark rounded-0 w-70") }}
        </form>
        {% if security.webauthn %}
          <hr class="fs-gap">
          <h2>{{ _fsdomain("Use WebAuthn to Sign In") }}</h2>
          <div>
            <form method="get" id="wan_signin_form" name="wan_signin_form">
              <input id="wan_signin" name="wan_signin" type="submit" value="{{ _fsdomain('Sign in with WebAuthn') }}" formaction="{{ url_for_security('wan_signin') }}{{ prop_next() }}">
            </form>
          </div>
        {% endif %}
        {% if security.oauthglue %}
          <hr class="fs-gap">
          <h2>{{ _fsdomain("Use Social Oauth to Sign In") }}</h2>
          {% for provider in security.oauthglue.provider_names %}
            <div class="fs-gap">
              <form method="post" id="{{ provider }}_form" name="{{ provider }}_form">
                <input id="{{ provider }}" name="{{ provider }}" type="submit" value="{{ _fsdomain('Sign in with ')~provider }}" formaction="{{ url_for_security('oauthstart', name=provider) }}{{ prop_next() }}">
                {% if csrf_token is defined %}
                  <input id="{{ provider }}_csrf_token" name="{{ provider }}_csrf_token" type="hidden" value="{{ csrf_token() }}">
                {% endif %}
              </form>
            </div>
          {% endfor %}
        {% endif %}
        <br>
        <p class="login-link">Don't have an account? <a href="http://127.0.0.1:5000/register">Sign Up</a></p>
    </div>
</body>
{% endblock content %}
